<div id='features'>

  <div class="dk-nav-main">

    <div class="dk-nav-left">
      <a href="#1">
        <div class="previous-distrikt">
          <h5 class="upper light">Previous Distrikt</h5>
        </div>
      </a>
    </div>

    <div class="dk-nav-right">
      <a href="#1">
        <div class="next-distrikt">
          <h5 class="upper light">Next Distrikt</h5>
        </div>
      </a>
    </div>
  </div>


  <section id='<%= @distrikts.first.name.delete(' ') %>'>

    <div class="card-explore">
      <div class="card-body-explore">

        <div class="card-label-container">

          <div class="card-label-left heading">
            <h1 class="bold upper touch"><%= @distrikts.first.name %></h1>
            <p class="upper"><%= @distrikts.first.city.name %>, <%= @distrikts.first.city.country %></p>
          </div>

          <div class="card-label-right text-center gold">
            <%= image_tag "hexagons/hex-solid.png", class: "hex-explore" %>
            <h4 class="explore-score"><%= compare(@user.score, @distrikts.first.score) %></h4>
            <h5 class="explore-match">MATCH</h5>
          </div>

        </div>

        <div class="card-description">
          <p class="light spaced"><%= @distrikts.first.description %></p>
        </div>
      </div>

      <div class="top-spots-main">
        <h5 class="upper bumpdown text-center">Top Spots in <%=@distrikts.first.name %></h5>

        <div class="top-spots-cards">
          <% @distrikts.first.places[0..5].each do |place| %>
            <div class="top-spots-card">
              <div class="top-spots-top" style="background-image: url('<%= place.img_url %>')">
              </div>
              <div class="top-spots-bottom">
                <h5 class="text-center light"><%= place.name %></h5>
              </div>
            </div>
          <% end %>
        </div>
      </div>
    </div>
  </section>


<!-- after first city -->

  <% @distrikts.drop(0).each_with_index do |distrikt, index| %>

    <section id='<%= index %>'>

      <div class="card-explore">
        <div class="card-body-explore">

          <div class="card-label-container">

            <div class="card-label-left heading">
              <h1 class="bold upper touch"><%= distrikt.name %></h1>
              <p class="upper"><%= distrikt.city.name %>, <%= distrikt.city.country %></p>
            </div>

            <div class="card-label-right text-center gold">
              <%= image_tag "hexagons/hex-solid.png", class: "hex-explore" %>
              <h4 class="explore-score"><%= compare(@user.score, distrikt.score) %></h4>
              <h5 class="explore-match">MATCH</h5>
            </div>

          </div>

          <div class="card-description">
            <p class="light spaced"><%= distrikt.description %></p>
          </div>
        </div>

        <div class="top-spots-main">
          <h5 class="upper bumpdown text-center">Top Spots in <%=distrikt.name %></h5>

          <div class="top-spots-cards">
            <% distrikt.places[0..5].each do |place| %>
              <div class="top-spots-card">
                <div class="top-spots-top" style="background-image: url('<%= place.img_url %>')">
                </div>
                <div class="top-spots-bottom">
                  <h5 class="text-center light"><%= place.name %></h5>
                </div>
              </div>
            <% end %>
          </div>
        </div>
      </div>
    </section>

  <% end %>

</div>


<% content_for :after_js do %>
  <script>
    $(document).ready(function(){
      // Add smooth scrolling to all links
      $("a:has(h5)").on('click', function(event) {
        var self = this;
        var next = parseInt($(this).attr('href').replace('#', ''));

        $($("a:has(h5)")[0]).attr('href', "#" + String(next - 1));
        $($("a:has(h5)")[1]).attr('href', "#" + String(next + 1));
        console.log(next)
        // Make sure this.hash has a value before overriding default behavior
        if (this.hash !== "") {
          // Prevent default anchor click behavior
          event.preventDefault();

          // Store hash
          var hash = this.hash;

          // Using jQuery's animate() method to add smooth page scroll
          // The optional number (800) specifies the number of milliseconds it takes to scroll to the specified area
          $('html, body').animate({
            scrollTop: $(hash).offset().top + 50
          }, 600, function(){

            // Add hash (#) to URL when done scrolling (default click behavior)
            window.location.hash = hash;
          });
        } // End if
      });
    });
  </script>
<% end %>
